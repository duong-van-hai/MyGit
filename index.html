<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>H·ªá Th·ªëng Tr·∫Øc Nghi·ªám Online</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; background: #f0f2f5; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .question-box { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .timer { position: fixed; top: 20px; right: 20px; background: #e74c3c; color: white; padding: 10px 20px; border-radius: 30px; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        /* M√†u s·∫Øc cho ph·∫ßn xem l·∫°i */
        .correct { background-color: #d4edda; border-color: #c3e6cb; color: #155724; padding: 5px; border-radius: 4px; }
        .wrong { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; padding: 5px; border-radius: 4px; }
        .true-answer { font-weight: bold; text-decoration: underline; }
        
        button { background: #007bff; color: white; border: none; padding: 12px 25px; cursor: pointer; border-radius: 6px; font-size: 16px; transition: 0.3s; }
        button:hover { background: #0056b3; }
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
    </style>
</head>
<body>

<div class="container">
    <div id="setup-box">
        <h2>üìù B√†i Ki·ªÉm Tra Tr·∫Øc Nghi·ªám</h2>
        <p>Vui l√≤ng nh·∫≠p t√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu b√†i l√†m (Th·ªùi gian: 15 ph√∫t)</p>
        <input type="text" id="student-name" placeholder="H·ªç v√† t√™n c·ªßa h·ªçc sinh...">
        <button onclick="startQuiz()">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
    </div>

    <div id="quiz-box" style="display:none;">
        <div class="timer" id="timer">15:00</div>
        <h3 id="display-name"></h3>
        <hr>
        <div id="questions-container"></div>
        <button onclick="submitQuiz()">N·ªôp b√†i ho√†n t·∫•t</button>
    </div>

    <div id="result-box" style="display:none;">
        <div style="text-align: center;">
            <h2 id="status-title">K·∫øt Qu·∫£ B√†i L√†m</h2>
            <div id="score-summary" style="font-size: 1.2em; margin-bottom: 20px;"></div>
            <button onclick="location.reload()">L√†m l·∫°i b√†i m·ªõi</button>
        </div>
        <hr>
        <h3>Chi ti·∫øt b√†i l√†m:</h3>
        <div id="review-container"></div>
    </div>
</div>

<script>
    const questions = [
        { q: "H√†nh tinh n√†o g·∫ßn M·∫∑t tr·ªùi nh·∫•t?", a: ["Th·ªßy tinh", "Kim tinh", "H·ªèa tinh", "Tr√°i ƒë·∫•t"], c: 0 },
        { q: "S·ªë nguy√™n t·ªë nh·ªè nh·∫•t l√† s·ªë n√†o?", a: ["0", "1", "2", "3"], c: 2 },
        { q: "ƒê·∫°i d∆∞∆°ng n√†o l·ªõn nh·∫•t th·∫ø gi·ªõi?", a: ["·∫§n ƒê·ªô D∆∞∆°ng", "ƒê·∫°i T√¢y D∆∞∆°ng", "B·∫Øc BƒÉng D∆∞∆°ng", "Th√°i B√¨nh D∆∞∆°ng"], c: 3 },
        { q: "Qu·ªëc k·ª≥ Vi·ªát Nam c√≥ m·∫•y m√†u?", a: ["1 m√†u", "2 m√†u", "3 m√†u", "4 m√†u"], c: 1 },
        { q: "L·ª±c h√∫t c·ªßa Tr√°i ƒë·∫•t g·ªçi l√† g√¨?", a: ["Tr·ªçng l·ª±c", "Ma s√°t", "ƒê·∫©y", "T·ª´ tr∆∞·ªùng"], c: 0 }
    ];

    // T·∫°o th√™m c√¢u h·ªèi cho ƒë·ªß 20 c√¢u
    for(let i=6; i<=20; i++) {
        questions.push({ q: `C√¢u h·ªèi ki·∫øn th·ª©c s·ªë ${i}: ƒê√°p √°n ƒë√∫ng l√† l·ª±a ch·ªçn ƒë·∫ßu ti√™n.`, a: ["ƒê√°p √°n ƒë√∫ng", "Sai A", "Sai B", "Sai C"], c: 0 });
    }

    let timeLeft = 15 * 60;
    let timerInterval;

    function startQuiz() {
        const name = document.getElementById('student-name').value;
        if (!name) { alert("Em h√£y nh·∫≠p h·ªç t√™n tr∆∞·ªõc nh√©!"); return; }
        document.getElementById('setup-box').style.display = 'none';
        document.getElementById('quiz-box').style.display = 'block';
        document.getElementById('display-name').innerText = "H·ªçc sinh: " + name;
        renderQuestions();
        startTimer();
    }

    function renderQuestions() {
        const container = document.getElementById('questions-container');
        questions.forEach((item, index) => {
            let html = `<div class="question-box">
                <p><strong>C√¢u ${index + 1}:</strong> ${item.q}</p>`;
            item.a.forEach((opt, i) => {
                html += `<label style="display:block; margin: 5px 0;">
                            <input type="radio" name="q${index}" value="${i}"> ${opt}
                         </label>`;
            });
            html += `</div>`;
            container.innerHTML += html;
        });
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            let min = Math.floor(timeLeft / 60);
            let sec = timeLeft % 60;
            document.getElementById('timer').innerText = `${min}:${sec < 10 ? '0' : ''}${sec}`;
            if (timeLeft <= 0) { clearInterval(timerInterval); submitQuiz(); }
        }, 1000);
    }

    function submitQuiz() {
        clearInterval(timerInterval);
        let score = 0;
        const reviewContainer = document.getElementById('review-container');
        reviewContainer.innerHTML = ''; 

        questions.forEach((item, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            const selectedIdx = selected ? parseInt(selected.value) : null;
            const isCorrect = selectedIdx === item.c;
            if (isCorrect) score++;

            // T·∫°o ph·∫ßn review
            let reviewHtml = `<div class="question-box ${isCorrect ? 'correct' : 'wrong'}">
                <p><strong>C√¢u ${index + 1}: ${item.q}</strong></p>
                <p> - C√¢u tr·∫£ l·ªùi c·ªßa em: ${selectedIdx !== null ? item.a[selectedIdx] : '<span style="color:red">B·ªè tr·ªëng</span>'}</p>
                ${!isCorrect ? `<p class="true-answer"> -> ƒê√°p √°n ƒë√∫ng: ${item.a[item.c]}</p>` : '<span>(Ch√≠nh x√°c!)</span>'}
            </div>`;
            reviewContainer.innerHTML += reviewHtml;
        });

        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('result-box').style.display = 'block';
        document.getElementById('score-summary').innerHTML = `
            H·ªçc sinh: <strong>${document.getElementById('student-name').value}</strong><br>
            S·ªë c√¢u ƒë√∫ng: <strong style="color:green">${score}/${questions.length}</strong> - 
            ƒêi·ªÉm s·ªë: <strong style="color:red">${(score/questions.length*10).toFixed(2)}</strong>
        `;
        window.scrollTo(0, 0); // Quay l√™n ƒë·∫ßu trang ƒë·ªÉ xem ƒëi·ªÉm
    }
</script>
</body>
</html>
